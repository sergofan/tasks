<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="x-route">
	<template>
		<style is="custom-style" include="shared-styles">
			:host {
				display: block;
			}
		</style>

		<app-location route="{{route}}" use-hash-as-path></app-location>

		<app-route route="{{route}}"
									pattern="/:page"
									data="{{data}}"
									tail="{{tail}}"></app-route>

		<app-route route="{{tail}}"
							 pattern="/:page"
							 data="{{subdata}}"></app-route>
	</template>
	<script>
	(function() {
		'use strict';

		Polymer({
			is: 'x-route',
			observers: [
				'pathChanged(route)'
			],
			properties: {
				route: {
					type: Object,
					notify: true
				},
				data: {
					type: Object,
					notify: true
				},
				tail: {
					type: Object,
					notify: true
				},
				subdata: {
					type: Object,
					notify: true
				}
			},
			pathChanged: function(route) {
				this.async(function() {
					switch(route.path) {
						case '':
							this.set('route.path', '/main');
							break;
						case '/':
							this.set('route.path', '/main');
							break;
						case '/floor1':
							this.set('route.path', '/floor1');
							break;
						case '/floor2':
							this.set('route.path', '/floor2');
							break;
						case '/cctv':
							this.set('route.path', '/cctv');
							break;
						case '/fan':
							this.set('route.path', '/fan');
							break;
						case '/chiller':
							this.set('route.path', '/chiller');
							break;
						case '/exhaust':
							this.set('route.path', '/exhaust');
							break;
					}
				});
			}
		});
	})();
	</script>
</dom-module>
